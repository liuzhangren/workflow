(function(e){function t(t){for(var i,n,a=t[0],c=t[1],d=t[2],l=0,p=[];l<a.length;l++)n=a[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,d||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],i=!0,n=1;n<o.length;n++){var a=o[n];0!==r[a]&&(i=!1)}i&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var i={},n={app:0},r={app:0},s=[];function a(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0a862c50":"0d61123f"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"chunk-0a862c50":1};n[e]?t.push(n[e]):0!==n[e]&&o[e]&&t.push(n[e]=new Promise((function(t,o){for(var i="css/"+({}[e]||e)+"."+{"chunk-0a862c50":"8fe499f4"}[e]+".css",r=c.p+i,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var d=s[a],l=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===i||l===r))return t()}var p=document.getElementsByTagName("style");for(a=0;a<p.length;a++){d=p[a],l=d.getAttribute("data-href");if(l===i||l===r)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var i=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=i,delete n[e],u.parentNode.removeChild(u),o(s)},u.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(u)})).then((function(){n[e]=0})));var i=r[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(t,o){i=r[e]=[t,o]}));t.push(i[2]=s);var d,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=a(e);var p=new Error;d=function(t){l.onerror=l.onload=null,clearTimeout(u);var o=r[e];if(0!==o){if(o){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",p.name="ChunkLoadError",p.type=i,p.request=n,o[1](p)}r[e]=void 0}};var u=setTimeout((function(){d({type:"timeout",target:l})}),12e4);l.onerror=l.onload=d,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(o,i,function(t){return e[t]}.bind(null,i));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/flow/",c.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var p=0;p<d.length;p++)t(d[p]);var u=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var i=o("64a9"),n=o.n(i);n.a},"375f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAAXNSR0IArs4c6QAAAJlJREFUCB01jj0KwlAQhGc3hXeyFPw5gXgKDQSjIK8QjeirHp7ATnIDUbGz9gbexLe+CckWW8w3O7Oy3IePCEq/yR9oZ1WFcTR4JYChLqswJCMwwzUzLYRCA5LBgJCEXE2nRzd/ZoTv1+3bH0x6MNtC5ODd4kJduRjFiwRcqijWu/OIunQdXRTBD7FWxUybr9oOulPXncCinf6xkkQ/lcJHVAAAAABJRU5ErkJggg=="},"56d7":function(e,t,o){"use strict";o.r(t);o("3b2b"),o("4917"),o("cadf"),o("551c"),o("f751"),o("097d"),o("db4d");var i=o("2b0e"),n=(o("6762"),o("2fdb"),o("0fb7"),o("450d"),o("f529")),r=o.n(n),s=(o("be4f"),o("896a")),a=o.n(s),c=o("bc3a"),d=o.n(c),l=o("8c4f");i["default"].use(l["a"]);var p=new l["a"]({mode:"history",base:"/flow/",routes:[{path:"/",redirect:"/approval/setting"},{path:"/approval/setting",name:"approval",component:function(e){o.e("chunk-0a862c50").then(function(){var t=[o("b3e8")];e.apply(null,t)}.bind(this)).catch(o.oe)}}]});o("28a5");function u(){}u.prototype={timer:"",debounce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,o=this;return function(i){var n=this,r=i;clearTimeout(o.timer),o.timer=setTimeout((function(){e.call(n,r)}),t)}},setCookie:function(e){for(var t=0,o=e.length;t<o;t++)for(var i in e[t])document.cookie=i+"="+encodeURIComponent(e[t][i])+"; path=/"},getCookie:function(e){for(var t=document.cookie,o=t.split("; "),i=0,n=o.length;i<n;i++){var r=o[i].split("=");if(e==r[0])return decodeURIComponent(r[1])}},clearCookie:function(e){var t=new Date;t.setTime(-1e3);for(var o=0,i=e.length;o<i;o++)document.cookie=e[o]+"=''; path=/; expires="+t.toGMTString()}},window.func=new u;var f,h=func,g=0;function v(){0===g&&C(),g++}function m(){g<=0||(g--,0===g&&setTimeout((function(){y()}),200))}function C(){f=a.a.service({lock:!0,background:"rgba(0, 0, 0, 0.2)",spinner:"my-el-custom-spinner"})}function y(){f.close()}var b={timeout:1e4},N=d.a.create(b);N.interceptors.request.use((function(e){return!1!==e.loading&&v(),e}),(function(e){return Promise.reject(e)})),N.interceptors.response.use((function(e){return m(),e.data.code&&200!=e.data.code?("登录用户ID不能为空"==e.data.msg&&(h.clearCookie(["token","uid"]),window.location.href="/login"),void r.a.error(e.data.msg)):e.data}),(function(e){return m(),(e.message.includes("timeout")||502==e.response.status)&&p.push({path:"/500",query:{redirect:p.currentRoute.query.redirect?p.currentRoute.query.redirect:p.currentRoute.fullPath}}),e.response.data.code&&200!=e.response.data.code&&r.a.error(e.response.data.msg),Promise.reject(e)})),Plugin.install=function(e,t){e.axios=N,window.axios=N,Object.defineProperties(e.prototype,{axios:{get:function(){return N}},$axios:{get:function(){return N}}})},i["default"].use(Plugin);Plugin;var A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},L=[],w={name:"app"},k=w,S=(o("034f"),o("2877")),E=Object(S["a"])(k,A,L,!1,null,null,null),_=E.exports,x=o("2f62");i["default"].use(x["a"]);var P=new x["a"].Store({state:{conditionVisible:!1,approveVisible:!1,clickItemName:"",conditionData:{},conditionForm:{},approverConfig:{}},mutations:{changeVisibleTrue:function(e){e.conditionVisible=!0},changeVisibleFalse:function(e){e.conditionVisible=!1},changeApproveVisibleTrue:function(e){e.approveVisible=!0},changeApproveVisibleFalse:function(e){e.approveVisible=!1},saveClickitem:function(e,t){e.clickItemName=t.payload},saveConditionData:function(e,t){var o=t.payload;e.conditionData=o},saveConditionForm:function(e,t){var o=t.payload;e.conditionForm=o},saveApproveConfig:function(e,t){var o=t.payload;e.approverConfig=o}},actions:{}}),O=(o("b8e0"),o("a4c4")),T=o.n(O),I=(o("6611"),o("e772")),R=o.n(I),D=(o("eca7"),o("3787")),M=o.n(D),U=(o("10cb"),o("f3ad")),V=o.n(U),j=(o("1f1a"),o("4e4b")),B=o.n(j),F=(o("425f"),o("4105")),G=o.n(F),W=(o("e612"),o("dd87")),J=o.n(W),Q=(o("075a"),o("72aa")),z=o.n(Q),Y=(o("b84d"),o("c216")),H=o.n(Y),q=(o("8f24"),o("76b9")),K=o.n(q),X=(o("d4df"),o("7fc1")),Z=o.n(X),$=(o("560b"),o("dcdc")),ee=o.n($),te=(o("fe07"),o("6ac5")),oe=o.n(te),ie=(o("b5d8"),o("f494")),ne=o.n(ie),re=(o("5e32"),o("6721")),se=o.n(re),ae=(o("0fb4"),o("9944")),ce=o.n(ae),de=(o("a7cc"),o("df33")),le=o.n(de),pe=(o("06f1"),o("6ac9")),ue=o.n(pe),fe=(o("1951"),o("eedf")),he=o.n(fe);o("0fae");i["default"].use(he.a),i["default"].use(ue.a),i["default"].use(le.a),i["default"].use(ce.a),i["default"].use(se.a),i["default"].use(ne.a),i["default"].use(oe.a),i["default"].use(ee.a),i["default"].use(Z.a),i["default"].use(K.a),i["default"].use(H.a),i["default"].use(z.a),i["default"].use(J.a),i["default"].use(G.a),i["default"].use(B.a),i["default"].use(V.a),i["default"].use(M.a),i["default"].use(R.a),i["default"].use(T.a),i["default"].prototype.$message={error:function(e){r.a.closeAll(),r.a.error(e)},success:function(e){r.a.closeAll(),r.a.success(e)}};o("c8d2");var ge={baseUrl:"/flow/"},ve=ge,me=o("efd9"),Ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"add-node-btn-box"},[o("div",{staticClass:"add-node-btn"},[o("el-popover",{attrs:{placement:"right-start"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("div",{staticClass:"add-node-popover-body"},[o("a",{staticClass:"add-node-popover-item approver",on:{click:function(t){return e.addType(1)}}},[o("div",{staticClass:"item-wrapper"},[o("span",{staticClass:"iconfont"},[e._v("")])]),o("p",[e._v("审批人")])]),o("a",{staticClass:"add-node-popover-item condition",on:{click:function(t){return e.addType(4)}}},[o("div",{staticClass:"item-wrapper"},[o("span",{staticClass:"iconfont"},[e._v("")])]),o("p",[e._v("条件分支")])])]),o("button",{staticClass:"btn",attrs:{slot:"reference",type:"button"},slot:"reference"},[o("span",{staticClass:"iconfont"},[e._v("")])])])],1)])},ye=[],be=o("ec26"),Ne={props:["childNodeP","nodeConfig","temp","isBranch"],data:function(){return{visible:!1}},methods:{addType:function(e){var t;(this.visible=!1,4!=e)?(1==e?t=this.isBranch?{id:Object(be["a"])(),nodeName:"审核人",isBranch:!0,error:!0,type:1,settype:4,selectMode:2,backMode:1,selectRange:1,directorLevel:1,replaceByUp:0,examineMode:3,noHanderAction:1,examineEndDirectorLevel:0,childNode:this.childNodeP,conditionNodes:[],nodeUserList:[]}:this.nodeConfig.isBranch?{id:Object(be["a"])(),nodeName:"审核人",isBranch:!0,error:!0,type:1,backMode:1,persons:[],settype:4,selectMode:2,selectRange:1,directorLevel:1,replaceByUp:0,examineMode:3,noHanderAction:1,examineEndDirectorLevel:0,childNode:this.childNodeP,conditionNodes:[],nodeUserList:[]}:{id:Object(be["a"])(),nodeName:"审核人",isBranch:!1,error:!0,type:1,backMode:1,persons:[],settype:4,selectMode:2,selectRange:1,directorLevel:1,replaceByUp:0,examineMode:3,noHanderAction:1,examineEndDirectorLevel:0,childNode:this.childNodeP,conditionNodes:[],nodeUserList:[]}:2==e&&(t=this.isBranch?{id:Object(be["a"])(),nodeName:"抄送人",isBranch:!0,type:2,ccSelfSelectFlag:1,childNode:this.childNodeP,nodeUserList:[],conditionNodes:[]}:{id:Object(be["a"])(),nodeName:"抄送人",isBranch:!1,type:2,ccSelfSelectFlag:1,childNode:this.childNodeP,nodeUserList:[],conditionNodes:[]}),this.$emit("update:childNodeP",t)):this.$emit("update:childNodeP",{id:Object(be["a"])(),nodeName:"路由",type:4,childNode:null,conditionNodes:[{id:Object(be["a"])(),nodeName:"条件1",isBranch:!0,error:!0,type:3,isCondition:!0,priorityLevel:1,conditionList:[],nodeUserList:[],childNode:this.childNodeP,conditionNodes:[]},{id:Object(be["a"])(),nodeName:"条件2",isBranch:!0,isCondition:!0,type:3,priorityLevel:2,conditionList:[],nodeUserList:[],childNode:null,conditionNodes:[]}]})}}},Ae=Ne,Le=Object(S["a"])(Ae,Ce,ye,!1,null,null,null),we=Le.exports;i["default"].use(me["a"]),i["default"].component("nodeWrap",me["a"]),i["default"].use(we),i["default"].component("addNode",we),i["default"].prototype.$func=h,i["default"].prototype.$ydc=ve,i["default"].config.productionTip=!1,i["default"].directive("enterNumber",{bind:function(e,t){var o=t.value,i=void 0===o?2:o;e="INPUT"==e.nodeName?e:e.children[0];var n=0==i?"^[\\+\\-]?\\d+\\d{0,0}":"^[\\+\\-]?\\d+\\.?\\d{0,".concat(i,"}");e.addEventListener("keyup",(function(){e.value=e.value.match(new RegExp(n,"g")),e.dispatchEvent(new Event("input"))}))}}),i["default"].directive("focus",{inserted:function(e){e.focus()}}),new i["default"]({router:p,store:P,components:{nodeWrap:me["a"],addNode:we},render:function(e){return e(_)}}).$mount("#app")},5836:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAANCAYAAAB2HjRBAAAAAXNSR0IArs4c6QAAAItJREFUKBVjXP/8j+f/v/9nMTD8l2FABoyMfxkZGA78Y2OJDRZlfI4sBWMzrnvy+zGGRpgsmGZ8AjRkAgMT40u4MOO/W4GSbKeAmn/9hwuSwmBirGQiRT2K2n//k8jXzMDIRYFmBoZRzShxQZgDDDDGX4SVYVPx/ycLUHMaI8N/F2zSeMT+MzEyrQEA924i2eq7BTEAAAAASUVORK5CYII="},"603e":function(e,t){e.exports="data:image/png;base64,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"},"64a9":function(e,t,o){},"677b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAd9JREFUKBV1Uj1oU1EUPue+1wRLWoqDULvVTgri2iolts7pGB0c6s+QLSg8XmOHTI/wiB3NYEshTl3NVkpRJJCxVCwIEVy6OIhoUJJ37zuec19ucKgXDvfc7+eecy4XAQA57KrX6zPDxDwHSksML2Uo9QHV2/yU95L5X2MpKJfUarW14UifAtC8QagYPbpqg3PBhBON00s1FIAA3yDQwyiKjh357x6G2+uoqO00yOVn5TaE9PH/TO6CrIDay+f8m8rOhHA4NuHW1nY3CGpFFrtuioLJ2WpYKx6fUtrQYHiO7JGMSV94Ph6wucwY8AgHjNlcNElq9qdQvVKIcG04GHwSkaw4jt7zHGUxSxhNZcEyFiDT4tLkVceEbU9rJ5vsFp+cOGEj9fOFwg3OhQRucdVVkmrjtleF44WZlvqKZ+j4qB5lON+kMEpG5j6390HC6OSBYI4XrXiwWq3OXZounFCqnzQajXdOcNEehmERlb/75/fgltfr9ZI7t1c+ovLaK8vLJ91u9+tFpiAI7irPb1NqNpvN5meZyxMhE2uen3udEh0N9Wj/2/n5meBXFhau5/3cJj//Pf6CT+M4tj/LGe3DVCqVmdm5y8/4UELERTES0RcC6Pz88X2n1Wq5T05/AeJ73lRH5FXnAAAAAElFTkSuQmCC"},"7a89":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAEBUlEQVRYw72YT2wbRRTGfztrb9rYIVH+OBEJkJQecIFErSKcCtqkICRCKg5EFRBZQqqEELLICXrgEATc2hMUS8CBA7ICEiqX0hgJgUjSQzeqqJLSOoeGNEVWm8SJmjqOqBt7OXidrp21PUv/fNJod968/ebbNzNvdlbBAQLBsA94FegFngHagUfM5lvAVeAvYBz4RY+EbshyK5ICDgDHgFcAlyR3BogCx/VIaPKehASC4V3AF8CAk8jZ4AwwrEdCfzsWEgiG3wK+4m7o7xW3gPf0SGjUrlEtIWIE+BKouk8iMLkG2zoHjPjM2HhFIYFg+CPgs/sooBiH2joHNuMzYwXzpmBozOEYdUT7/zGkR0LfbxMSCIY7gGmg5iEJSQJdeiQ0DyAsDScfogjMvk4WRCQQDL8AVFzrDwgH9UhoMp+cjjl5UhUKXXta8O9upLG+GoDE6gaxKwmmL98gkzWc0H0ATCpm2o4jmTG9Ho3X+/34Gjy27UsrKX6KxlhPpWWFbAKtgtzeISVCFUpZEQC+Bg+D/X5UVchQYvbdL8htYFLo2tNSVkQeTQ0euvzNsrQAfYLcLioF/+5GaWYnvsDTgtxWLgVfk1ea2ddYOXIWdAgeUO7IOls5NQLJbxKApeV1aebE6oYj4YJcqpVC7EpCmtiJL5AUwLys93RskeWVVEW/5ZUNpmOLToTMC+CSrHcmk+VUNMZSGTFLKylORS+TyWSdCLkkgD+cPCEUhbNT15idS5BMpclmDbJZg2QqzexcgrNT1xCK9LTLY1w6xfsaPHQ8VofXo23Z8utCKboHWE+lmf/nZtnomdgEWvO772ngsJ1Xlaby7FPNW5ub9WUNI1c3yqzUxOoGF2cXuZ3OlHI5rUdCr+WjcNxOSG3NDnr2tVKlyZ4gtuPR5hrq63aiX4izlvzXzuWENZIEguGfsRwbamuq6O1pR3OrtkNgNySGhbA4SHfuZBg/d5W15G2r+YweCR2Gwi+09zFziqap9O1vx1Ptxu0WaG6B2yUK7y11zS1wucw2d6E9XzzVbvr2t6NpW9/rSWA4X9myxmfGbrZ1DiwAg893P05LkxdViLtFLbo368JiE9a6TdlR5cLr0ViIrwEc1SOhiW1CTDEXu196IxvY23ZICAVrUdXCutWWv7pUez9rqa/byfWl9ZHfvnknbO3bdsF/Gz03AnxilHCwmxelfG3w8dH+nk+LjSWf/e7XqSHgawO8pSaglcBuohbV14F33375OdtzU9mXGP39/JMGfE6ZQ3jxSiphH1NgeOjF7rlyPBXxw/ifBxX4EOjHnFelhsdCnDVgDDjxZu++iUp9ONoUfpy84DOjk/9R8wRQazavAQvkftRMANEjB/Zel+X+D66hKxwLm6GMAAAAAElFTkSuQmCC"},b7dd:function(e,t,o){"use strict";var i=o("e617"),n=o.n(i);n.a},c8d2:function(e,t,o){},e617:function(e,t,o){},efd9:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[4!=e.nodeConfig.type?i("div",{staticClass:"node-wrap"},[i("div",{staticClass:"node-wrap-box",class:(0==e.nodeConfig.type?"start-node ":"")+(e.isTried?"active":"")},[i("div",[i("div",{staticClass:"title",style:"background: rgb("+["87, 106, 149","255, 148, 62","50, 150, 250"][e.nodeConfig.type]+");"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.nodeConfig.type,expression:"nodeConfig.type==1"}],staticClass:"iconfont"},[e._v("")]),i("span",{directives:[{name:"show",rawName:"v-show",value:2==e.nodeConfig.type,expression:"nodeConfig.type==2"}],staticClass:"iconfont"},[e._v("")]),0==e.nodeConfig.type?i("span",[e._v(e._s(e.nodeConfig.nodeName))]):e._e(),0!=e.nodeConfig.type&&e.isInput?i("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.nodeConfig.nodeName,expression:"nodeConfig.nodeName"}],staticClass:"ant-input editable-title-input",attrs:{type:"text",placeholder:e.placeholderList[e.nodeConfig.type]},domProps:{value:e.nodeConfig.nodeName},on:{blur:function(t){return e.blurEvent()},focus:function(e){return e.currentTarget.select()},input:function(t){t.target.composing||e.$set(e.nodeConfig,"nodeName",t.target.value)}}}):e._e(),0==e.nodeConfig.type||e.isInput?e._e():i("span",{staticClass:"editable-title",on:{click:function(t){return e.clickEvent()}}},[e._v(e._s(e.nodeConfig.nodeName))]),0!=e.nodeConfig.type?i("i",{staticClass:"anticon anticon-close close",on:{click:function(t){return e.delNode()}}}):e._e()]),i("div",{staticClass:"content",on:{click:e.setPerson}},[0==e.nodeConfig.type?i("div",{staticClass:"text"},[e._v(e._s(e.arrToStr(e.flowPermission)?e.arrToStr(e.flowPermission):"Start"))]):e._e(),1==e.nodeConfig.type?i("div",{staticClass:"text"},[e.setApproverStr(e.nodeConfig)?e._e():i("span",{staticClass:"placeholder"},[e._v("审核节点")]),e._v("\n                        "+e._s(e.setApproverStr(e.nodeConfig))+"\n                    ")]):e._e(),2==e.nodeConfig.type?i("div",{staticClass:"text"},[e.copyerStr(e.nodeConfig)?e._e():i("span",{staticClass:"placeholder"},[e._v("请选择"+e._s(e.placeholderList[e.nodeConfig.type]))]),e._v("\n                        "+e._s(e.copyerStr(e.nodeConfig))+"\n                    ")]):e._e(),i("i",{staticClass:"anticon anticon-right arrow"})])])]),i("addNode",{attrs:{nodeConfig:e.nodeConfig,childNodeP:e.nodeConfig.childNode},on:{"update:childNodeP":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:child-node-p":function(t){return e.$set(e.nodeConfig,"childNode",t)}}})],1):e._e(),4==e.nodeConfig.type?i("div",{staticClass:"branch-wrap"},[i("div",{staticClass:"branch-box-wrap"},[i("div",{staticClass:"branch-box"},[i("button",{staticClass:"add-branch",on:{click:e.addTerm}},[e._v("添加条件")]),e._l(e.nodeConfig.conditionNodes,(function(t,o){return i("div",{key:o,staticClass:"col-box"},[i("div",{staticClass:"condition-node"},[i("div",{staticClass:"condition-node-box"},[i("div",{staticClass:"auto-judge",class:e.isTried?"active":""},[0!=o?i("div",{staticClass:"sort-left",on:{click:function(t){return e.arrTransfer(o,-1)}}},[e._v("<")]):e._e(),i("div",{staticClass:"title-wrapper"},[e.isInputList[o]?i("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.nodeName,expression:"item.nodeName"}],staticClass:"ant-input editable-title-input",attrs:{type:"text"},domProps:{value:t.nodeName},on:{blur:function(t){return e.blurEvent(o)},focus:function(e){return e.currentTarget.select()},input:function(o){o.target.composing||e.$set(t,"nodeName",o.target.value)}}}):e._e(),e.isInputList[o]?e._e():i("span",{staticClass:"editable-title",on:{click:function(t){return e.clickEvent(o)}}},[e._v(e._s(t.nodeName))]),i("span",{staticClass:"priority-title",on:{click:function(o){return e.setPerson(t.priorityLevel)}}},[e._v("优先级"+e._s(t.priorityLevel))]),i("i",{staticClass:"anticon anticon-close close",on:{click:function(t){return e.delTerm(o)}}})]),o!=e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"sort-right",on:{click:function(t){return e.arrTransfer(o)}}},[e._v(">")]):e._e(),i("div",{staticClass:"content",on:{click:function(o){return e.setPerson(t)}}},[e._v(e._s(e.conditionStr(t,o)))])]),i("addNode",{attrs:{isBranch:"1",nodeConfig:e.nodeConfig,childNodeP:t.childNode},on:{"update:childNodeP":function(o){return e.$set(t,"childNode",o)},"update:child-node-p":function(o){return e.$set(t,"childNode",o)}}})],1)]),t.childNode&&t.childNode?i("nodeWrap",{attrs:{test:e.test,nodeConfig:t.childNode,tableId:e.tableId,isTried:e.isTried,directorMaxLevel:e.directorMaxLevel},on:{"update:test":function(t){e.test=t},"update:nodeConfig":function(o){return e.$set(t,"childNode",o)},"update:node-config":function(o){return e.$set(t,"childNode",o)},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}):e._e(),0==o?i("div",{staticClass:"top-left-cover-line"}):e._e(),0==o?i("div",{staticClass:"bottom-left-cover-line"}):e._e(),o==e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"top-right-cover-line"}):e._e(),o==e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"bottom-right-cover-line"}):e._e()],1)}))],2),i("addNode",{attrs:{nodeConfig:e.nodeConfig,childNodeP:e.nodeConfig.childNode},on:{"update:childNodeP":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:child-node-p":function(t){return e.$set(e.nodeConfig,"childNode",t)}}})],1)]):e._e(),i("el-drawer",{ref:"drawer",staticClass:"drawer",attrs:{title:e.clickItemName,visible:e.conditionVisible,direction:"ltr","custom-class":"demo-drawer","append-to-body":""},on:{"update:visible":function(t){e.conditionVisible=t}}},[i("div",{staticClass:"demo-drawer__content"},[e._l(e.conditionData,(function(t,o){return i("el-form",{key:o,attrs:{model:e.conditionForm}},[i("el-form-item",{attrs:{label:t.conditionLabel,"label-width":e.formLabelWidth}},[i("el-select",{attrs:{autocomplete:"off"},model:{value:e.conditionForm[t.conditionKey],callback:function(o){e.$set(e.conditionForm,t.conditionKey,o)},expression:"conditionForm[item.conditionKey]"}},e._l(t.list,(function(e){return i("el-option",{key:e.id,attrs:{label:e.dictName,value:e.dictCode}})})),1)],1)],1)})),i("div",{staticClass:"demo-drawer__footer"},[i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.confirm}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))]),i("el-button",{on:{click:e.cancelForm}},[e._v("取消")])],1)],2)]),i("el-dialog",{attrs:{title:"提示",visible:e.tipVisible},on:{"update:visible":function(t){e.tipVisible=t}}},[i("div",{staticClass:"ant-confirm-body"},[i("i",{staticClass:"anticon anticon-close-circle",staticStyle:{color:"#f00"}}),i("span",{staticClass:"ant-confirm-title"},[e._v("当前无法发布")]),i("div",{staticClass:"ant-confirm-content"},[i("div",[i("p",{staticClass:"error-modal-desc"},[e._v("以下内容不完善，需进行修改")]),i("div",{staticClass:"error-modal-list"},e._l(e.tipList,(function(t,o){return i("div",{key:o,staticClass:"error-modal-item"},[i("div",{staticClass:"error-modal-item-label"},[e._v("流程设计")]),i("div",{staticClass:"error-modal-item-content"},[e._v(e._s(t.name)+" 未选择"+e._s(t.type))])])})),0)])])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.tipVisible=!1}}},[e._v("我知道了")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tipVisible=!1}}},[e._v("前往修改")])],1)]),i("el-drawer",{staticClass:"set_promoter",attrs:{title:"审批人设置",visible:e.approverDrawer,direction:"rtl",size:"400px","before-close":e.saveApprover,"append-to-body":""},on:{"update:visible":function(t){e.approverDrawer=t}}},[i("el-tabs",{on:{"tab-click":e.changeTabsType},model:{value:e.approverTabsVal,callback:function(t){e.approverTabsVal=t},expression:"approverTabsVal"}},[i("el-tab-pane",{attrs:{label:"基础配置",name:"1"}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"drawer_content"},[i("div",{staticClass:"approver_content"},[i("el-radio-group",{staticClass:"clear",on:{change:e.changeType},model:{value:e.approverConfig.settype,callback:function(t){e.$set(e.approverConfig,"settype",t)},expression:"approverConfig.settype"}},[i("el-radio",{attrs:{label:1}},[e._v("指定成员")]),i("el-radio",{attrs:{label:4}},[e._v("发起人自选")]),i("el-radio",{attrs:{label:5}},[e._v("发起人自己")])],1),1==e.approverConfig.settype?i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]):e._e(),2==e.status?i("el-button",{attrs:{type:"primary"},on:{click:e.showAuthBtnConfig}},[e._v("按钮权限配置")]):e._e(),1==e.approverConfig.settype?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v(e._s(t.name)+"\n                                    "),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.removeEle(e.approverConfig.nodeUserList,t,"targetId")}}})])})),0!=e.approverConfig.nodeUserList.length?i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2):e._e()],1),2==e.approverConfig.settype?i("div",{staticClass:"approver_manager"},[i("p",[i("span",[e._v("发起人的：")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.approverConfig.directorLevel,expression:"approverConfig.directorLevel"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.approverConfig,"directorLevel",t.target.multiple?o:o[0])}}},e._l(e.directorMaxLevel,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(1==t?"直接":"第"+t+"级")+"主管")])})),0)]),i("p",{staticClass:"tip"},[e._v("找不到主管时，由上级主管代审批")])]):e._e(),5==e.approverConfig.settype?i("div",{staticClass:"approver_self"},[i("p",[e._v("该审批节点设置“发起人自己”后，审批人默认为发起人")])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:4==e.approverConfig.settype,expression:"approverConfig.settype==4"}],staticClass:"approver_self_select"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.approverConfig.selectMode,callback:function(t){e.$set(e.approverConfig,"selectMode",t)},expression:"approverConfig.selectMode"}},e._l(e.selectModeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("h3",[e._v("选择范围")]),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.approverConfig.selectRange,callback:function(t){e.$set(e.approverConfig,"selectRange",t)},expression:"approverConfig.selectRange"}},e._l(e.selectRangeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),2==e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]):e._e(),3==e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addRoleApprover}},[e._v("添加/修改角色")]):e._e(),2==e.approverConfig.selectRange||3==e.approverConfig.selectRange?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v(e._s(t.name)+"\n                                    "),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.removeEle(e.approverConfig.nodeUserList,t,"targetId")}}})])})),0!=e.approverConfig.nodeUserList.length&&1!=e.approverConfig.selectRange?i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2):e._e()],1),7==e.approverConfig.settype?i("div",{staticClass:"approver_manager"},[i("p",[e._v("审批终点")]),i("p",{staticStyle:{"padding-bottom":"20px"}},[i("span",[e._v("发起人的：")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.approverConfig.examineEndDirectorLevel,expression:"approverConfig.examineEndDirectorLevel"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.approverConfig,"examineEndDirectorLevel",t.target.multiple?o:o[0])}}},e._l(e.directorMaxLevel,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(1==t?"最高":"第"+t)+"层级主管")])})),0)])]):e._e(),1==e.approverConfig.settype&&e.approverConfig.nodeUserList.length>1||2==e.approverConfig.settype||4==e.approverConfig.settype&&2==e.approverConfig.selectMode?i("div",{staticClass:"approver_some"},[i("p",[e._v("多人审批时采用的审批方式")]),i("el-radio-group",{staticClass:"clear",on:{change:e.changeExamineMode},model:{value:e.approverConfig.examineMode,callback:function(t){e.$set(e.approverConfig,"examineMode",t)},expression:"approverConfig.examineMode"}},[i("el-radio",{attrs:{label:1}},[e._v("依次审批")]),i("br"),2!=e.approverConfig.settype?i("el-radio",{attrs:{label:2}},[e._v("会签(须所有审批人同意)")]):e._e(),i("br"),i("el-radio",{attrs:{label:3}},[e._v("或签")])],1)],1):e._e(),2==e.approverConfig.settype||7==e.approverConfig.settype?i("div",{staticClass:"approver_some"},[i("p",[e._v("审批人为空时")]),i("el-radio-group",{staticClass:"clear",model:{value:e.approverConfig.noHanderAction,callback:function(t){e.$set(e.approverConfig,"noHanderAction",t)},expression:"approverConfig.noHanderAction"}},[i("el-radio",{attrs:{label:1}},[e._v("自动审批通过/不允许发起")]),i("br"),i("el-radio",{attrs:{label:2}},[e._v("转交给审核管理员")])],1)],1):e._e(),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveApprover}},[e._v("保存设置")]),i("el-button",{on:{click:function(t){e.approverDrawer=!1}}},[e._v("取 消")])],1)]),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择成员",visible:e.approverVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.approverVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.approverSearchName,expression:"approverSearchName"}],attrs:{type:"text",placeholder:"搜索成员"},domProps:{value:e.approverSearchName},on:{input:[function(t){t.target.composing||(e.approverSearchName=t.target.value)},function(t){return e.getDebounceData(t)}]}}),i("p",[i("a",{on:{click:function(t){return e.toLastLevel()}}},[e._v("上级")])]),i("ul",e._l(e.selectPersonShow,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box not"},[t.orgName&&!t.userName?[i("a",[i("img",{attrs:{src:o("5836")}}),e._v(e._s(t.orgName))]),i("i",{on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v("下级")])]:e._e(),t.userName?[i("a",{class:e.toggleClass(e.approverEmplyessList,t)&&"active",attrs:{title:t.departmentNames},on:{click:function(o){return e.toChecked(e.approverEmplyessList,t)}}},[i("img",{attrs:{src:o("7a89")}}),e._v(e._s(t.userName+"("+t.account+")")+"\n                                        ")])]:e._e()],2)})),0)]),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.approverEmplyessList.length)+"）\n                                    "),i("a",{on:{click:function(t){e.approverEmplyessList=[]}}},[e._v("清空")])]),i("ul",e._l(e.approverEmplyessList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("7a89")}}),i("span",[e._v(e._s((t.employeeName?t.employeeName:t.userName)+"("+(t.account?t.account:t.id)+")"))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.removeEle(e.approverEmplyessList,t)}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverVisible=!1,e.clickIds=[]}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)]),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择角色",visible:e.approverRoleVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.approverRoleVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.approverRoleSearchName,expression:"approverRoleSearchName"}],attrs:{type:"text",placeholder:"搜索角色"},domProps:{value:e.approverRoleSearchName},on:{input:[function(t){t.target.composing||(e.approverRoleSearchName=t.target.value)},function(t){return e.getDebounceData(t,2)}]}}),i("ul",e._l(e.roles,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box not",class:e.toggleClass(e.roleList,t,"roleId")&&"active",on:{click:function(o){e.roleList=[t]}}},[i("a",{attrs:{title:t.description}},[i("img",{attrs:{src:o("603e")}}),e._v(e._s(t.roleName))])])})),0)]),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.roleList.length)+"）\n                                    "),i("a",{on:{click:function(t){e.roleList=[]}}},[e._v("清空")])]),i("ul",e._l(e.roleList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("603e")}}),i("span",[e._v(e._s(t.roleName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.removeEle(e.roleList,t,"roleId")}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverRoleVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)])],1)]),i("el-tab-pane",{attrs:{label:"回退配置",name:"2"}},[i("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.changeBackMode},model:{value:e.approverConfig.backMode,callback:function(t){e.$set(e.approverConfig,"backMode",t)},expression:"approverConfig.backMode"}},[i("el-radio",{attrs:{label:1}},[e._v("回退到上一节点")]),i("el-radio",{attrs:{label:2}},[e._v("回退到发起人")])],1),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveApprover}},[e._v("保存设置")]),i("el-button",{on:{click:function(t){e.approverDrawer=!1}}},[e._v("取 消")])],1)],1)],1)],1),e.nodeConfig.childNode&&e.nodeConfig.childNode?i("nodeWrap",{attrs:{nodeConfig:e.nodeConfig.childNode,tableId:e.tableId,isTried:e.isTried,directorMaxLevel:e.directorMaxLevel},on:{"update:nodeConfig":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:node-config":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}):e._e()],1)},n=[],r=(o("8e6e"),o("8615"),o("6b54"),o("96cf"),o("3b8d")),s=(o("55dd"),o("28a5"),o("7f7f"),o("ac6a"),o("456d"),o("75fc")),a=o("bd86"),c=o("ec26");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){Object(a["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var p={props:["nodeConfig","flowPermission","directorMaxLevel","isTried","tableId"],data:function(){return{clickIds:[],persons:{},selectPersonShow:[],tipVisible:!1,tipList:[],conditionVisible:!1,conditionForm:{},approverTabsVal:"1",formLabelWidth:"120px",conditionData:{},clickItemName:"",loading:!1,placeholderList:["发起人","审核人","抄送人"],isInputList:[],isInput:!1,approverConfig:{settype:"",selectMode:"",examineMode:"",selectRange:"",backMode:""},selectModeOptions:[{value:1,label:"选一个人"},{value:2,label:"选多个人"}],selectRangeOptions:[{value:1,label:"全公司"},{value:2,label:"指定成员"},{value:3,label:"角色"}],status:"",promoterVisible:!1,promoterDrawer:!1,departments:{},checkedDepartmentList:[],checkedEmployessList:[],promoterSearchName:"",flowPermission1:this.flowPermission,approverDrawer:!1,approverVisible:!1,approverRoleVisible:!1,approverEmplyessList:[],approverSearchName:"",roles:[],roleList:[],approverRoleSearchName:"",copyerDrawer:!1,copyerVisible:!1,copyerConfig:{},copyerSearchName:"",activeName:"1",copyerEmployessList:[],copyerRoleList:[],ccSelfSelectFlag:[],conditionDrawer:!1,conditionConfig:{},conditionsConfig:{conditionNodes:[]},bPriorityLevel:"",conditions:[],conditionList:[],conditionRoleVisible:!1,conditionRoleSearchName:"",conditionDepartmentList:[],conditionEmployessList:[],conditionRoleList:[],test:""}},mounted:function(){if(this.status=JSON.parse(sessionStorage.getItem("status")),1==this.nodeConfig.type)this.nodeConfig.error=!this.setApproverStr(this.nodeConfig);else if(2==this.nodeConfig.type)this.nodeConfig.error=!this.copyerStr(this.nodeConfig);else if(4==this.nodeConfig.type)for(var e=0;e<this.nodeConfig.conditionNodes.length;e++)this.nodeConfig.conditionNodes[e].error="请设置条件"==this.conditionStr(this.nodeConfig.conditionNodes[e],e)&&e!=this.nodeConfig.conditionNodes.length-1},methods:{showAuthBtnConfig:function(){window.parent.postMessage(l(l({},this.nodeConfig),{},{showAuthBtnModal:!0}),"*")},toLastLevel:function(){for(var e=this.clickIds.slice(0,this.clickIds.length-1),t=this.persons,o=0;o<e.length;o++)t=t[e[o]];t.list?this.selectPersonShow=t.list.reduce((function(e,t){return[].concat(Object(s["a"])(e),[{userName:t.userName,orgNo:t.orgNo,account:t.account,postName:t.postName}])}),[]):this.selectPersonShow=Object.keys(t).reduce((function(e,o){return[].concat(Object(s["a"])(e),[{id:o,orgName:t[o].orgName}])}),[]),this.clickIds=[]},changeBackMode:function(e){this.$set(this.approverConfig,"backMode",e)},changeTabsType:function(e){this.approverTabsVal=e.name},changeExamineMode:function(e){},changeMode:function(e){this.approverConfig.selectMode=e},confirm:function(){var e=this,t=this.currentClickedItem.id;this.nodeConfig.conditionNodes.forEach((function(o){if(o.id==t){var i=Object.keys(e.conditionForm).reduce((function(t,o){return""!=e.conditionForm[o]&&(t="".concat(t).concat(o,"=='").concat(e.conditionForm[o].split(",")[0],"'&&")),t}),"");o.conditionsequenceflow=0==i.length?"":"${"+"".concat(i.substring(0,i.length-2))+"}"}})),this.conditionVisible=!1},clickEvent:function(e){e||0===e?this.$set(this.isInputList,e,!0):this.isInput=!0},blurEvent:function(e){e||0===e?(this.$set(this.isInputList,e,!1),this.nodeConfig.conditionNodes[e].nodeName=this.nodeConfig.conditionNodes[e].nodeName?this.nodeConfig.conditionNodes[e].nodeName:"条件"):(this.isInput=!1,this.nodeConfig.nodeName=this.nodeConfig.nodeName?this.nodeConfig.nodeName:this.placeholderList[this.nodeConfig.type])},conditionStr:function(e,t){e.conditionList,e.nodeUserList;var o=e.conditionsequenceflow;return o&&""!=o?"点击查看条件":"请设置条件"},dealStr:function(e,t){var o=[],i=e.split(",");for(var n in t)i.map((function(e){e==n&&o.push(t[n].value)}));return o.join("或")},addConditionRole:function(){this.conditionRoleSearchName="",this.conditionRoleVisible=!0,this.activeName="1",this.getDepartmentList(),this.conditionDepartmentList=[],this.conditionEmployessList=[],this.conditionRoleList=[];for(var e=0;e<this.conditionConfig.nodeUserList.length;e++){var t=this.conditionConfig.nodeUserList[e],o=t.type,i=t.name,n=t.targetId;1==o?this.conditionEmployessList.push({employeeName:i,id:n}):2==o?this.conditionRoleList.push({roleName:i,roleId:n}):3==o&&this.conditionDepartmentList.push({departmentName:i,id:n})}},sureConditionRole:function(){var e=this;this.conditionConfig.nodeUserList=[],this.conditionRoleList.map((function(t){e.conditionConfig.nodeUserList.push({type:2,targetId:t.roleId,name:t.roleName})})),this.conditionDepartmentList.map((function(t){e.conditionConfig.nodeUserList.push({type:3,targetId:t.id,name:t.departmentName})})),this.conditionEmployessList.map((function(t){e.conditionConfig.nodeUserList.push({type:1,targetId:t.id,name:t.employeeName})})),this.conditionRoleVisible=!1},addCondition:function(){var e=this;this.conditionList=[],this.conditionVisible=!0,this.$axios.get("/conditions.json?tableId="+this.tableId).then((function(t){if(e.conditions=t.data,e.conditionConfig.conditionList)for(var o=0;o<e.conditionConfig.conditionList.length;o++){var i=e.conditionConfig.conditionList[o].columnId;0==i?e.conditionList.push({columnId:0}):e.conditionList.push(e.conditions.filter((function(e){return e.columnId==i}))[0])}}))},changeOptType:function(e){1==e.optType?e.zdy1=2:(e.zdy1=1,e.zdy2=2)},sureCondition:function(){for(var e=0;e<this.conditionList.length;e++){var t=this.conditionList[e],o=t.columnId,i=t.showName,n=t.columnName,r=t.showType,s=(n=t.columnName,t.columnType),a=t.fixedDownBoxValue;this.toggleClass(this.conditionConfig.conditionList,this.conditionList[e],"columnId")||(0==o?(this.conditionConfig.nodeUserList,this.conditionConfig.conditionList.push({type:1,columnId:o,showName:"发起人"})):"Double"==s?this.conditionConfig.conditionList.push({showType:r,columnId:o,type:2,showName:i,optType:"1",zdy1:"2",opt1:"<",zdy2:"",opt2:"<",columnDbname:n,columnType:s}):"String"==s&&"3"==r&&this.conditionConfig.conditionList.push({showType:r,columnId:o,type:2,showName:i,zdy1:"",columnDbname:n,columnType:s,fixedDownBoxValue:a}))}for(e=this.conditionConfig.conditionList.length-1;e>=0;e--)this.toggleClass(this.conditionList,this.conditionConfig.conditionList[e],"columnId")||this.conditionConfig.conditionList.splice(e,1);this.conditionConfig.conditionList.sort((function(e,t){return e.columnId-t.columnId})),this.conditionVisible=!1},saveCondition:function(){this.conditionDrawer=!1;var e=this.conditionsConfig.conditionNodes.splice(this.bPriorityLevel-1,1);this.conditionsConfig.conditionNodes.splice(this.conditionConfig.priorityLevel-1,0,e[0]),this.conditionsConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1}));for(var t=0;t<this.conditionsConfig.conditionNodes.length;t++)this.conditionsConfig.conditionNodes[t].error="请设置条件"==this.conditionStr(this.conditionsConfig.conditionNodes[t],t)&&t!=this.conditionsConfig.conditionNodes.length-1;this.$emit("update:nodeConfig",this.conditionsConfig)},getDebounceData:function(e){var t=this;this.$axios.get("/platform/get/v1/linkage",{params:{content:e.target.value}}).then((function(e){var o=e.data;t.selectPersonShow=o}))},handleClick:function(){this.copyerSearchName="",this.conditionRoleSearchName="",1==this.activeName?this.getDepartmentList():this.getRoleList()},addCopyer:function(){this.copyerSearchName="",this.copyerVisible=!0,this.activeName="1",this.getDepartmentList(),this.copyerEmployessList=[],this.copyerRoleList=[];for(var e=0;e<this.copyerConfig.nodeUserList.length;e++){var t=this.copyerConfig.nodeUserList[e],o=t.type,i=t.name,n=t.targetId;1==o?this.copyerEmployessList.push({employeeName:i,id:n}):2==o&&this.copyerRoleList.push({roleName:i,roleId:n})}},sureCopyer:function(){var e=this;this.copyerConfig.nodeUserList=[],this.copyerEmployessList.map((function(t){e.copyerConfig.nodeUserList.push({type:1,targetId:t.id,name:t.employeeName})})),this.copyerRoleList.map((function(t){e.copyerConfig.nodeUserList.push({type:2,targetId:t.roleId,name:t.roleName})})),this.copyerVisible=!1},saveCopyer:function(){this.copyerConfig.ccSelfSelectFlag=0==this.ccSelfSelectFlag.length?0:1,this.copyerConfig.error=!this.copyerStr(this.copyerConfig),this.$emit("update:nodeConfig",this.copyerConfig),this.copyerDrawer=!1},copyerStr:function(e){return 0!=e.nodeUserList.length?this.arrToStr(e.nodeUserList):1==e.ccSelfSelectFlag?"发起人自选":void 0},changeRange:function(e){this.approverConfig.nodeUserList=[],this.$set(this.approverConfig,"selectRange",e)},changeType:function(e){2==e?this.$set(this.approverConfig,"directorLevel",1):4==e?(this.$set(this.approverConfig,"selectMode",1),this.$set(this.approverConfig,"selectRange",1)):7==e&&this.$set(this.approverConfig,"examineEndDirectorLevel",1)},addApprover:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,o,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.approverVisible=!0,this.approverSearchName="",e.next=4,this.getAllPersons();case 4:for(this.approverEmplyessList=this.nodeConfig.persons.reduce((function(e,t){return[].concat(Object(s["a"])(e),[{userName:t.userName,account:t.account}])}),[]),sessionStorage.setItem("persons",JSON.stringify(this.nodeConfig.persons)),sessionStorage.setItem("test",JSON.stringify(this.approverEmplyessList)),t=0;t<this.approverConfig.nodeUserList.length;t++)o=this.approverConfig.nodeUserList[t],i=o.name,n=o.targetId,this.approverEmplyessList.push({employeeName:i,id:n});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addRoleApprover:function(){this.approverRoleVisible=!0,this.approverRoleSearchName="",this.getRoleList(),this.roleList=[];for(var e=0;e<this.approverConfig.nodeUserList.length;e++){var t=this.approverConfig.nodeUserList[e],o=t.name,i=t.targetId;this.roleList.push({roleName:o,roleId:i})}},sureApprover:function(){sessionStorage.setItem("test2",JSON.stringify(this.approverEmplyessList)),this.approverConfig.persons=this.approverEmplyessList,this.approverVisible=!1},setApproverStr:function(e){if(1==e.settype){if(1==e.nodeUserList.length)return e.nodeUserList[0].name;if(e.nodeUserList.length>1){if(1==e.examineMode)return this.arrToStr(e.nodeUserList);if(2==e.examineMode)return e.nodeUserList.length+"人会签"}}else if(2==e.settype){var t=1==e.directorLevel?"直接主管":"第"+e.directorLevel+"级主管";if(1==e.examineMode)return t;if(2==e.examineMode)return t+"会签"}else{if(4==e.settype)return 1==e.selectRange?"发起人自选":e.nodeUserList.length>0?2==e.selectRange?"发起人自选":"发起人从"+e.nodeUserList[0].name+"中自选":"";if(5==e.settype)return"发起人自己";if(7==e.settype)return"从直接主管到通讯录中级别最高的第"+e.examineEndDirectorLevel+"个层级主管"}},saveApprover:function(){this.$emit("update:nodeConfig",l(l({},this.nodeConfig),this.approverConfig)),this.approverConfig={settype:4,selectMode:2,examineMode:3,selectRange:1},this.approverDrawer=!1},addPromoter:function(){this.promoterVisible=!0,this.getDepartmentList(),this.promoterSearchName="",this.checkedEmployessList=[],this.checkedDepartmentList=[];for(var e=0;e<this.flowPermission1.length;e++){var t=this.flowPermission1[e],o=t.type,i=t.name,n=t.targetId;1==o?this.checkedEmployessList.push({employeeName:i,id:n}):3==o&&this.checkedDepartmentList.push({departmentName:i,id:n})}},surePromoter:function(){var e=this;this.flowPermission1=[],this.checkedDepartmentList.map((function(t){e.flowPermission1.push({type:3,targetId:t.id,name:t.departmentName})})),this.checkedEmployessList.map((function(t){e.flowPermission1.push({type:1,targetId:t.id,name:t.employeeName})})),this.promoterVisible=!1},savePromoter:function(){this.$emit("update:flowPermission",this.flowPermission1),this.promoterDrawer=!1},arrToStr:function(e){if(e)return e.map((function(e){return e.name})).toString()},toggleStrClass:function(e,t){var o=e.zdy1?e.zdy1.split(","):[];return o.some((function(e){return e==t}))},toStrChecked:function(e,t){var o=e.zdy1?e.zdy1.split(","):[],i=this.toggleStrClass(e,t);i?this.removeStrEle(e,t):(o.push(t),e.zdy1=o.toString())},removeStrEle:function(e,t){var o,i=e.zdy1?e.zdy1.split(","):[];i.map((function(e,i){e==t&&(o=i)})),i.splice(o,1),e.zdy1=i.toString()},toggleClass:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"account";return e.some((function(e){return e[o]==t[o]}))},toChecked:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"account",i=this.toggleClass(e,t,o);i?this.removeEle(e,t,o):this.approverEmplyessList.push(t)},removeEle:function(e,t){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"account";e.map((function(e,n){e[i]==t[i]&&(o=n)})),e.splice(o,1)},getRoleList:function(){var e=this;this.$axios.get("/roles.json").then((function(t){e.roles=t.data.list}))},changeDataPartment:function(e){var t=this;return e.reduce((function(e,o){return o.userList.length>0?e[o.id]={orgName:o.orgName,list:o.userList,userNo:o.userNo}:o.list.length>0&&o.userNo>0&&(e[o.id]=l(l({},t.changeDataPartment(o.list)),{},{userNo:o.userNo,orgName:o.orgName})),e}),{})},getDepartmentList:function(e){this.clickIds.push(e);for(var t=this.persons,o=0;o<this.clickIds.length;o++)t=t[this.clickIds[o]];t.list?this.selectPersonShow=t.list.reduce((function(e,t){return[].concat(Object(s["a"])(e),[{userName:t.userName,orgNo:t.orgNo,account:t.account,postName:t.postName}])}),[]):this.selectPersonShow=Object.keys(t).reduce((function(e,o){return[].concat(Object(s["a"])(e),[{id:o,orgName:t[o].orgName}])}),[])},getAllPersons:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/platform/get/v1/org_user_tree");case 2:t=e.sent,this.persons=this.changeDataPartment(t.data.list),this.selectPersonShow=Object.keys(this.persons).reduce((function(e,t){return[].concat(Object(s["a"])(e),[{id:t,orgName:o.persons[t].orgName}])}),[]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delNode:function(){this.$emit("update:nodeConfig",this.nodeConfig.childNode)},addTerm:function(){var e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,id:Object(c["a"])(),isCondition:!0,priorityLevel:e,conditionList:[],nodeUserList:[],childNode:null});for(var t=0;t<this.nodeConfig.conditionNodes.length;t++)this.nodeConfig.conditionNodes[t].error="请设置条件"==this.conditionStr(this.nodeConfig.conditionNodes[t],t)&&t!=this.nodeConfig.conditionNodes.length-1;this.$emit("update:nodeConfig",this.nodeConfig)},delTerm:function(e){this.nodeConfig.conditionNodes.splice(e,1);for(var t=0;t<this.nodeConfig.conditionNodes.length;t++)this.nodeConfig.conditionNodes[t].error="请设置条件"==this.conditionStr(this.nodeConfig.conditionNodes[t],t)&&t!=this.nodeConfig.conditionNodes.length-1;this.$emit("update:nodeConfig",this.nodeConfig),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:nodeConfig",this.nodeConfig.conditionNodes[0].childNode))},reData:function(e,t){e.childNode?this.reData(e.childNode,t):e.childNode=t},handleClose:function(e){this.loading||(this.conditionVisible=!1)},cancelForm:function(){this.loading=!1,this.conditionVisible=!1},setPerson:function(e){var t=this,o=this.nodeConfig.type;4==o?this.conditionVisible=!0:1==o&&(this.approverConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.approverDrawer=!0),this.currentClickedItem=e,this.nodeConfig.conditionNodes.forEach((function(e){e.id==t.currentClickedItem.id&&(t.clickItemName=e.nodeName)}));var i=e.conditionsequenceflow,n=JSON.parse(sessionStorage.getItem("conditions"));if(this.conditionData=Object.values(n),this.conditionForm=this.conditionData.reduce((function(e,t){return l(l({},e),{},Object(a["a"])({},t.conditionKey,""))}),{}),i){var r=i.substring(0,i.length-1).slice(2);this.conditionForm=r.split("&&").reduce((function(e,t){var o=t.split("==")[0],i=t.split("==")[1];return l(l({},e),{},Object(a["a"])({},o,i.substring(0,i.length-1).substr(1)))}),{})}0==o?(this.promoterDrawer=!0,this.flowPermission1=this.flowPermission):1==o||(2==o?(this.copyerDrawer=!0,this.copyerConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.ccSelfSelectFlag=0==this.copyerConfig.ccSelfSelectFlag?[]:[this.copyerConfig.ccSelfSelectFlag]):(this.conditionDrawer=!0,this.bPriorityLevel=priorityLevel,this.conditionsConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.conditionConfig=this.conditionsConfig.conditionNodes[priorityLevel-1]))},arrTransfer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+t,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1}));for(var o=0;o<this.nodeConfig.conditionNodes.length;o++)this.nodeConfig.conditionNodes[o].error="请设置条件"==this.conditionStr(this.nodeConfig.conditionNodes[o],o)&&o!=this.nodeConfig.conditionNodes.length-1;this.$emit("update:nodeConfig",this.nodeConfig)}}},u=p,f=(o("b7dd"),o("2877")),h=Object(f["a"])(u,i,n,!1,null,null,null);t["a"]=h.exports}});